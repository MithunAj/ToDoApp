<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>

<div id="container">
    <div id="app-container">
        <h2 style="text-align: center;"><span class="material-symbols-outlined">
            task
            </span> ToDoApp</h2>
        <form action="/addTask" method="GET" id="todo-container">
            <div id="description">
            <label for="description">Description</label>
            <input type="text" placeholder="What do you wanna do ?"  name="name" required>
            </div>
            <div id="category-due-date">
                <div id="category">
                <label for="category">Category</label>
                <select name="category" id="category" required>
                    <option value="Personal">Personal</option>
                    <option value="Work">Work</option>
                    <option value="School">School</option>
                    <option value="Other">Other</option>

                </select>
                </div>
                <div id="due-date">
                <label for="date">Due Date</label>
                <input type="date" name="dueDate" id="date" required>
                </div>
            </div>
            <div id="buttons">
                <input type="submit" value="Add task">
                <a href="/deleteTasks" method="DELETE" style="text-decoration: none;"><input type="button" value="Delete tasks" id="delete-task"></a>
            </div>   
        </form>

        <% if (tasks){%>
            <div id="tasks-container">
            <% for(task of tasks) {%>
                <div class="task-item">
                    <% if (task.isCompleted){%>
                        <input type="checkbox" id="<%= task._id %>" name="<%= task.name %>" class="check-box" checked> 
                        <label for="<%= task._id %>" id="label-<%= task._id %>" style="text-decoration: line-through;"> <%=task.name %></label>
                    <%}else {%>
                        <input type="checkbox" id="<%= task._id %>" name="<%= task.name %>" class="check-box">
                        <label for="<%= task._id %>" id="label-<%= task._id %>"> <%=task.name %></label>
                    <%}%>
                    
                    <small><%= task.dueDate.getDate() + "/" + task.dueDate.getMonth()+ "/" + task.dueDate.getFullYear() %></small>
                    <small class="<%=task.category%>"><%= task.category %></small>    
                </div>   
            <%}%>
            </div>
        <%}%>
    </div>
    
</div>

<script src="/js/script.js"></script>